/*
 * generated by Xtext
 */
package edu.kit.ipd.sdq.vitruvius.framework.mir.validation

import org.eclipse.xtext.validation.Check
import edu.kit.ipd.sdq.vitruvius.framework.mir.mIR.FeatureMapping

import static extension edu.kit.ipd.sdq.vitruvius.framework.mir.helpers.MIRHelper.*
import edu.kit.ipd.sdq.vitruvius.framework.mir.mIR.MIRPackage

/**
 * Custom validation rules. 
 *
 * see http://www.eclipse.org/Xtext/documentation.html#validation
 */
class MIRValidator extends AbstractMIRValidator {
	
	public static val MIXED_FEATURES = 'mixedTypesFeatureMapping'
	public static val EDATATYPES_AND_CONSTRAINTS = 'eDataTypesAndConstraints'
	
	@Check
	def checkWithsMapPrimitivesOrEClasses(FeatureMapping featureMapping) {
		val errorID = featureMapping.getErrorID
		
		if (errorID.equals(MIXED_FEATURES)) {
			error('Both mapped elements have to be either EDataTypes or EClasses',
			      MIRPackage.Literals.MAPPING__MAPPED_ELEMENTS,
			      MIXED_FEATURES)
		} else if (errorID.equals(EDATATYPES_AND_CONSTRAINTS)) {
			error('A feature mapping of EDataTypes must not have further constraints',
			      MIRPackage.Literals.MAPPING__CONSTRAINTS,
			      EDATATYPES_AND_CONSTRAINTS)
		}
	}
}
